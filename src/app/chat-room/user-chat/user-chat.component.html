<ng-container *ngIf="user$ | async as user; else empty">
  <!-- Chat container-->
  <div
    fxLayout="column"
    fxLayoutAlign="center center"
    style="width: 50%; min-width: 100%; height: 100%"
  >
    <!-- Header -->
    <app-chat-header
      style="width: 100%"
      [chatId]="'chat.id'"
      fxFlex="64px"
    ></app-chat-header>

    <!-- Messages-->
    <div fxLayout="column" div="message">
      <ng-container
        *ngFor="let msg of messages; trackBy: trackByCreated; let i = index"
      >
        <app-chat-message
          [msg]="msg"
          [predecessor]="i - 1 >= 0 ? this.messages[i - 1] : null"
          [user]="user"
        ></app-chat-message>
      </ng-container>

      <!-- "is typing" Indicator-->
      <app-typing-indicator
        [user]="user"
        [typing]="'chat.typing'"
      ></app-typing-indicator>
    </div>

    <!-- Send form and other controls -->
    <app-chat-controls
      style="width: 100%"
      [chatId]="'chat.id'"
    ></app-chat-controls>
  </div>
</ng-container>

<ng-template #empty>
  <h2 class="text-center">There are not users at the moment.</h2>
</ng-template>
